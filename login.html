<!doctype html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login SAKO-MART</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Poppins", sans-serif;
        background: linear-gradient(135deg, #e8f5e9 0%, #ffffff 100%);
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
      }

      .login-card {
        background: white;
        padding: 40px;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
        width: 380px;
        text-align: center;
      }

      .logo-container {
        background-color: #2e7d32;
        width: 60px;
        height: 60px;
        border-radius: 15px;
        margin: 0 auto 15px;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      h2 {
        color: #2e7d32;
        margin: 0;
        font-weight: 600;
      }
      p {
        color: #666;
        font-size: 14px;
        margin-bottom: 30px;
      }

      .form-group {
        text-align: left;
        margin-bottom: 20px;
      }
      label {
        display: block;
        font-size: 14px;
        font-weight: 600;
        margin-bottom: 8px;
        color: #333;
      }

      input[type="text"],
      input[type="password"] {
        width: 100%;
        padding: 12px;
        border: 1px solid #e0e0e0;
        border-radius: 10px;
        background-color: #f9f9f9;
        box-sizing: border-box;
      }

      .options {
        display: flex;
        align-items: center;
        font-size: 13px;
        color: #666;
        margin-bottom: 25px;
      }

      .btn-masuk {
        background: linear-gradient(to right, #2e7d32, #fbc02d);
        color: white;
        border: none;
        padding: 14px;
        border-radius: 10px;
        width: 100%;
        font-weight: 600;
        cursor: pointer;
        transition: 0.3s;
      }

      .btn-masuk:hover {
        opacity: 0.9;
        transform: translateY(-2px);
      }
    </style>
  </head>
  <body>
    <div class="login-card">
      <div class="logo-container">
        <svg width="30" height="30" viewBox="0 0 24 24" fill="white">
          <path
            d="M17 6h-2V5c0-1.65-1.35-3-3-3S9 3.35 9 5v1H7c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zM12 4c.55 0 1 .45 1 1v1h-2V5c0-.55.45-1 1-1zm5 15H7V8h10v11z"
          />
        </svg>
      </div>
      <h2>SAKO-MART</h2>
      <p>Sistem Kasir SAKO-MART</p>

      <div class="form-group">
        <label>ID Pengguna</label>
        <input type="text" id="username" placeholder="Masukkan ID pengguna" />
      </div>

      <div class="form-group">
        <label>Kata Sandi</label>
        <input
          type="password"
          id="password"
          placeholder="Masukkan kata sandi"
        />
      </div>

      <div class="options">
        <input type="checkbox" id="remember" />
        <label for="remember" style="margin: 0 0 0 8px; font-weight: 400"
          >Ingat saya</label
        >
      </div>

      <button type="button" class="btn-masuk" onclick="prosesLogin()">
        Masuk
      </button>
    </div>

    <script>
      async function prosesLogin() {
        const user = document.querySelector('input[type="text"]').value;
        const pass = document.querySelector('input[type="password"]').value;

        if (!user || !pass) {
          alert("ID Pengguna dan Kata Sandi harus diisi!");
          return;
        }

        const response = await fetch("/api/login", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ username: user, password: pass }),
        });

        const hasil = await response.json();

        if (hasil.success) {
          // Jika berhasil, arahkan ke halaman dashboard
          window.location.href = "/dashboard";
        } else {
          alert(hasil.message);
        }
      }
    </script>
  </body>
</html>
